pipeline{
    agent any
    environment{
        DOCKERHUB_CREDENTIALS= credentials('docker_hub')
    }
    stages{
        stage("build as code"){
            steps{
                sh 'mvn clean install'
            }
        }
        stage('Build a docker image'){
            script{
                steps{
                    sh "docker build -t kallepalli/tomcatimage:${BUILD_NUMBER} ."

                }
            }
        }    
    }
}