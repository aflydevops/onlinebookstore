pipeline{
    agent any
    stages{
        stage("build as code"){
            steps{
                sh 'mvn clean install'
            }
        }
        stage("deploy"){
            steps{
                sshagent(['deploy_tom']){
                   sh 'scp -o StrictHostKeyChecking=no ./target/onlinebookstore-0.0.1-SNAPSHOT.war ubuntu@3.80.191.229:/opt/tomcat/webapps'
                 }
            }
        }
    }
}